<?xml version="1.0" ?>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<!-- saved from url=(0017)http://localhost/ -->
<script language="JavaScript" src="../../displayToc.js"></script>
<script language="JavaScript" src="../../tocParas.js"></script>
<script language="JavaScript" src="../../tocTab.js"></script>
<link rel="stylesheet" type="text/css" href="../../scineplex.css">
<title></title>
<link rel="stylesheet" href="../../Active.css" type="text/css" />
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rev="made" href="mailto:" />
</head>

<body>



<ul id="index">
  <li><a href="#NAME">NAME</a></li>
  <li><a href="#DESCRIPTION">DESCRIPTION</a>
    <ul>
      <li><a href="#Can-I-get-a-BNF-yacc-RE-for-the-Perl-language-">Can I get a BNF/yacc/RE for the Perl language?</a></li>
      <li><a href="#What-are-all-these-punctuation-signs-and-how-do-I-know-when-to-use-them-">What are all these $@%&amp;* punctuation signs, and how do I know when to use them?</a></li>
      <li><a href="#Do-I-always-never-have-to-quote-my-strings-or-use-semicolons-and-commas-">Do I always/never have to quote my strings or use semicolons and commas?</a></li>
      <li><a href="#How-do-I-skip-some-return-values-">How do I skip some return values?</a></li>
      <li><a href="#How-do-I-temporarily-block-warnings-">How do I temporarily block warnings?</a></li>
      <li><a href="#Whats-an-extension-">What&#39;s an extension?</a></li>
      <li><a href="#Why-do-Perl-operators-have-different-precedence-than-C-operators-">Why do Perl operators have different precedence than C operators?</a></li>
      <li><a href="#How-do-I-declare-create-a-structure-">How do I declare/create a structure?</a></li>
      <li><a href="#How-do-I-create-a-module-">How do I create a module?</a></li>
      <li><a href="#How-do-I-adopt-or-take-over-a-module-already-on-CPAN-">How do I adopt or take over a module already on CPAN?</a></li>
      <li><a href="#How-do-I-create-a-class-">How do I create a class?  </a></li>
      <li><a href="#How-can-I-tell-if-a-variable-is-tainted-">How can I tell if a variable is tainted?</a></li>
      <li><a href="#Whats-a-closure-">What&#39;s a closure?</a></li>
      <li><a href="#What-is-variable-suicide-and-how-can-I-prevent-it-">What is variable suicide and how can I prevent it?</a></li>
      <li><a href="#How-can-I-pass-return-a-Function-FileHandle-Array-Hash-Method-Regex-">How can I pass/return a {Function, FileHandle, Array, Hash, Method, Regex}?</a></li>
      <li><a href="#How-do-I-create-a-static-variable-">How do I create a static variable?</a></li>
      <li><a href="#Whats-the-difference-between-dynamic-and-lexical-static-scoping-Between-local-and-my-">What&#39;s the difference between dynamic and lexical (static) scoping? Between local() and my()?</a></li>
      <li><a href="#How-can-I-access-a-dynamic-variable-while-a-similarly-named-lexical-is-in-scope-">How can I access a dynamic variable while a similarly named lexical is in scope?</a></li>
      <li><a href="#Whats-the-difference-between-deep-and-shallow-binding-">What&#39;s the difference between deep and shallow binding?</a></li>
      <li><a href="#Why-doesnt-my-foo-fh-work-right-">Why doesn&#39;t &quot;my($foo) = &lt;$fh&gt;;&quot; work right?</a></li>
      <li><a href="#How-do-I-redefine-a-builtin-function-operator-or-method-">How do I redefine a builtin function, operator, or method?</a></li>
      <li><a href="#Whats-the-difference-between-calling-a-function-as-foo-and-foo-">What&#39;s the difference between calling a function as &amp;foo and foo()?</a></li>
      <li><a href="#How-do-I-create-a-switch-or-case-statement-">How do I create a switch or case statement?</a></li>
      <li><a href="#How-can-I-catch-accesses-to-undefined-variables-functions-or-methods-">How can I catch accesses to undefined variables, functions, or methods?</a></li>
      <li><a href="#Why-cant-a-method-included-in-this-same-file-be-found-">Why can&#39;t a method included in this same file be found?</a></li>
      <li><a href="#How-can-I-find-out-my-current-or-calling-package-">How can I find out my current or calling package?</a></li>
      <li><a href="#How-can-I-comment-out-a-large-block-of-Perl-code-">How can I comment out a large block of Perl code?</a></li>
      <li><a href="#How-do-I-clear-a-package-">How do I clear a package?</a></li>
      <li><a href="#How-can-I-use-a-variable-as-a-variable-name-">How can I use a variable as a variable name?</a></li>
      <li><a href="#What-does-bad-interpreter-mean-">What does &quot;bad interpreter&quot; mean?</a></li>
    </ul>
  </li>
  <li><a href="#AUTHOR-AND-COPYRIGHT">AUTHOR AND COPYRIGHT</a></li>
</ul>

<h1 id="NAME">NAME</h1>

<p>perlfaq7 - General Perl Language Issues</p>

<h1 id="DESCRIPTION">DESCRIPTION</h1>

<p>This section deals with general Perl language issues that don&#39;t clearly fit into any of the other sections.</p>

<h2 id="Can-I-get-a-BNF-yacc-RE-for-the-Perl-language-">Can I get a BNF/yacc/RE for the Perl language?</h2>

<p>There is no BNF, but you can paw your way through the yacc grammar in perly.y in the source distribution if you&#39;re particularly brave. The grammar relies on very smart tokenizing code, so be prepared to venture into toke.c as well.</p>

<p>In the words of Chaim Frenkel: &quot;Perl&#39;s grammar can not be reduced to BNF. The work of parsing perl is distributed between yacc, the lexer, smoke and mirrors.&quot;</p>

<h2 id="What-are-all-these-punctuation-signs-and-how-do-I-know-when-to-use-them-">What are all these $@%&amp;* punctuation signs, and how do I know when to use them?</h2>

<p>They are type specifiers, as detailed in <a href="../../lib/pods/perldata.html">perldata</a>:</p>

<pre><code><code>    $ for scalar values (number, string or reference)
    @ for arrays
    % for hashes (associative arrays)
    &amp; for subroutines (aka functions, procedures, methods)
    * for all types of that symbol name. In version 4 you used them like
      pointers, but in modern perls you can just use references.</code></code></pre>

<p>There are a couple of other symbols that you&#39;re likely to encounter that aren&#39;t really type specifiers:</p>

<pre><code><code>    &lt;&gt; are used for inputting a record from a filehandle.
    \  takes a reference to something.</code></code></pre>

<p>Note that &lt;FILE&gt; is <i>neither</i> the type specifier for files nor the name of the handle. It is the <code><code>&lt;&gt;</code></code> operator applied to the handle FILE. It reads one line (well, record--see <a href="../../lib/pods/perlvar.html#pod-">&quot;$/&quot; in perlvar</a>) from the handle FILE in scalar context, or <i>all</i> lines in list context. When performing open, close, or any other operation besides <code><code>&lt;&gt;</code></code> on files, or even when talking about the handle, do <i>not</i> use the brackets. These are correct: <code><code>eof(FH)</code></code>, <code><code>seek(FH, 0, 2)</code></code> and &quot;copying from STDIN to FILE&quot;.</p>

<h2 id="Do-I-always-never-have-to-quote-my-strings-or-use-semicolons-and-commas-">Do I always/never have to quote my strings or use semicolons and commas?</h2>

<p>Normally, a bareword doesn&#39;t need to be quoted, but in most cases probably should be (and must be under <code><code>use strict</code></code>). But a hash key consisting of a simple word and the left-hand operand to the <code><code>=&gt;</code></code> operator both count as though they were quoted:</p>

<pre><code><code>    <span class="variable">This</span>                    <span class="variable">is</span> <span class="variable">like</span> <span class="variable">this</span>
    <span class="operator">------------</span>            <span class="operator">---------------</span>
    <span class="variable">$foo</span><span class="operator">{</span><span class="string">line</span><span class="operator">}</span>              <span class="variable">$foo</span><span class="operator">{</span><span class="string">'line'</span><span class="operator">}</span>
    <span class="string">bar</span> <span class="operator">=&gt;</span> <span class="variable">stuff</span>            <span class="string">'bar'</span> <span class="operator">=&gt;</span> <span class="variable">stuff</span>
</code></code></pre>

<p>The final semicolon in a block is optional, as is the final comma in a list. Good style (see <a href="../../lib/pods/perlstyle.html">perlstyle</a>) says to put them in except for one-liners:</p>

<pre><code><code>    <span class="keyword">if</span> <span class="operator">(</span><span class="variable">$whoops</span><span class="operator">)</span> <span class="operator">{</span> <span class="keyword">exit</span> <span class="number">1</span> <span class="operator">}</span>
    <span class="keyword">my</span> <span class="variable">@nums</span> <span class="operator">=</span> <span class="operator">(</span><span class="number">1</span><span class="operator">,</span> <span class="number">2</span><span class="operator">,</span> <span class="number">3</span><span class="operator">);</span>
    
    <span class="keyword">if</span> <span class="operator">(</span><span class="variable">$whoops</span><span class="operator">)</span> <span class="operator">{</span>
        <span class="keyword">exit</span> <span class="number">1</span><span class="operator">;</span>
    <span class="operator">}</span>
    
    <span class="keyword">my</span> <span class="variable">@lines</span> <span class="operator">=</span> <span class="operator">(</span>
        <span class="string">"There Beren came from mountains cold"</span><span class="operator">,</span>
        <span class="string">"And lost he wandered under leaves"</span><span class="operator">,</span>
    <span class="operator">);</span>
</code></code></pre>

<h2 id="How-do-I-skip-some-return-values-">How do I skip some return values?</h2>

<p>One way is to treat the return values as a list and index into it:</p>

<pre><code><code>    <span class="variable">$dir</span> <span class="operator">=</span> <span class="operator">(</span><span class="keyword">getpwnam</span><span class="operator">(</span><span class="variable">$user</span><span class="operator">))</span><span class="operator">[</span><span class="number">7</span><span class="operator">]</span><span class="operator">;</span>
</code></code></pre>

<p>Another way is to use undef as an element on the left-hand-side:</p>

<pre><code><code>    <span class="operator">(</span><span class="variable">$dev</span><span class="operator">,</span> <span class="variable">$ino</span><span class="operator">,</span> <span class="keyword">undef</span><span class="operator">,</span> <span class="keyword">undef</span><span class="operator">,</span> <span class="variable">$uid</span><span class="operator">,</span> <span class="variable">$gid</span><span class="operator">)</span> <span class="operator">=</span> <span class="keyword">stat</span><span class="operator">(</span><span class="variable">$file</span><span class="operator">);</span>
</code></code></pre>

<p>You can also use a list slice to select only the elements that you need:</p>

<pre><code><code>    <span class="operator">(</span><span class="variable">$dev</span><span class="operator">,</span> <span class="variable">$ino</span><span class="operator">,</span> <span class="variable">$uid</span><span class="operator">,</span> <span class="variable">$gid</span><span class="operator">)</span> <span class="operator">=</span> <span class="operator">(</span> <span class="keyword">stat</span><span class="operator">(</span><span class="variable">$file</span><span class="operator">)</span> <span class="operator">)</span><span class="operator">[</span><span class="number">0</span><span class="operator">,</span><span class="number">1</span><span class="operator">,</span><span class="number">4</span><span class="operator">,</span><span class="number">5</span><span class="operator">]</span><span class="operator">;</span>
</code></code></pre>

<h2 id="How-do-I-temporarily-block-warnings-">How do I temporarily block warnings?</h2>

<p>If you are running Perl 5.6.0 or better, the <code><code>use warnings</code></code> pragma allows fine control of what warnings are produced. See <a href="../../lib/pods/perllexwarn.html">perllexwarn</a> for more details.</p>

<pre><code><code>    <span class="operator">{</span>
        <span class="keyword">no</span> <span class="variable">warnings</span><span class="operator">;</span>          <span class="comment"># temporarily turn off warnings</span>
        <span class="variable">$x</span> <span class="operator">=</span> <span class="variable">$y</span> <span class="operator">+</span> <span class="variable">$z</span><span class="operator">;</span>         <span class="comment"># I know these might be undef</span>
    <span class="operator">}</span>
</code></code></pre>

<p>Additionally, you can enable and disable categories of warnings. You turn off the categories you want to ignore and you can still get other categories of warnings. See <a href="../../lib/pods/perllexwarn.html">perllexwarn</a> for the complete details, including the category names and hierarchy.</p>

<pre><code><code>    <span class="operator">{</span>
        <span class="keyword">no</span> <span class="variable">warnings</span> <span class="string">'uninitialized'</span><span class="operator">;</span>
        <span class="variable">$x</span> <span class="operator">=</span> <span class="variable">$y</span> <span class="operator">+</span> <span class="variable">$z</span><span class="operator">;</span>
    <span class="operator">}</span>
</code></code></pre>

<p>If you have an older version of Perl, the <code><code>$^W</code></code> variable (documented in <a href="../../lib/pods/perlvar.html">perlvar</a>) controls runtime warnings for a block:</p>

<pre><code><code>    <span class="operator">{</span>
        <span class="keyword">local</span> <span class="variable">$^W</span> <span class="operator">=</span> <span class="number">0</span><span class="operator">;</span>        <span class="comment"># temporarily turn off warnings</span>
        <span class="variable">$x</span> <span class="operator">=</span> <span class="variable">$y</span> <span class="operator">+</span> <span class="variable">$z</span><span class="operator">;</span>         <span class="comment"># I know these might be undef</span>
    <span class="operator">}</span>
</code></code></pre>

<p>Note that like all the punctuation variables, you cannot currently use my() on <code><code>$^W</code></code>, only local().</p>

<h2 id="Whats-an-extension-">What&#39;s an extension?</h2>

<p>An extension is a way of calling compiled C code from Perl. Reading <a href="../../lib/pods/perlxstut.html">perlxstut</a> is a good place to learn more about extensions.</p>

<h2 id="Why-do-Perl-operators-have-different-precedence-than-C-operators-">Why do Perl operators have different precedence than C operators?</h2>

<p>Actually, they don&#39;t. All C operators that Perl copies have the same precedence in Perl as they do in C. The problem is with operators that C doesn&#39;t have, especially functions that give a list context to everything on their right, eg. print, chmod, exec, and so on. Such functions are called &quot;list operators&quot; and appear as such in the precedence table in <a href="../../lib/pods/perlop.html">perlop</a>.</p>

<p>A common mistake is to write:</p>

<pre><code><code>    <span class="keyword">unlink</span> <span class="variable">$file</span> <span class="operator">||</span> <span class="keyword">die</span> <span class="string">"snafu"</span><span class="operator">;</span>
</code></code></pre>

<p>This gets interpreted as:</p>

<pre><code><code>    <span class="keyword">unlink</span> <span class="operator">(</span><span class="variable">$file</span> <span class="operator">||</span> <span class="keyword">die</span> <span class="string">"snafu"</span><span class="operator">);</span>
</code></code></pre>

<p>To avoid this problem, either put in extra parentheses or use the super low precedence <code><code>or</code></code> operator:</p>

<pre><code><code>    <span class="operator">(</span><span class="keyword">unlink</span> <span class="variable">$file</span><span class="operator">)</span> <span class="operator">||</span> <span class="keyword">die</span> <span class="string">"snafu"</span><span class="operator">;</span>
    <span class="keyword">unlink</span> <span class="variable">$file</span> <span class="keyword">or</span> <span class="keyword">die</span> <span class="string">"snafu"</span><span class="operator">;</span>
</code></code></pre>

<p>The &quot;English&quot; operators (<code><code>and</code></code>, <code><code>or</code></code>, <code><code>xor</code></code>, and <code><code>not</code></code>) deliberately have precedence lower than that of list operators for just such situations as the one above.</p>

<p>Another operator with surprising precedence is exponentiation. It binds more tightly even than unary minus, making <code><code>-2**2</code></code> produce a negative four and not a positive one. It is also right-associating, meaning that <code><code>2**3**2</code></code> is two raised to the ninth power, not eight squared.</p>

<p>Although it has the same precedence as in C, Perl&#39;s <code><code>?:</code></code> operator produces an lvalue. This assigns $x to either $if_true or $if_false, depending on the trueness of $maybe:</p>

<pre><code><code>    <span class="operator">(</span><span class="variable">$maybe</span> <span class="operator">?</span> <span class="variable">$if_true</span> <span class="operator">:</span> <span class="variable">$if_false</span><span class="operator">)</span> <span class="operator">=</span> <span class="variable">$x</span><span class="operator">;</span>
</code></code></pre>

<h2 id="How-do-I-declare-create-a-structure-">How do I declare/create a structure?</h2>

<p>In general, you don&#39;t &quot;declare&quot; a structure. Just use a (probably anonymous) hash reference. See <a href="../../lib/pods/perlref.html">perlref</a> and <a href="../../lib/pods/perldsc.html">perldsc</a> for details. Here&#39;s an example:</p>

<pre><code><code>    <span class="variable">$person</span> <span class="operator">=</span> <span class="operator">{}</span><span class="operator">;</span>                   <span class="comment"># new anonymous hash</span>
    <span class="variable">$person</span><span class="operator">-&gt;</span><span class="operator">{</span><span class="string">AGE</span><span class="operator">}</span>  <span class="operator">=</span> <span class="number">24</span><span class="operator">;</span>           <span class="comment"># set field AGE to 24</span>
    <span class="variable">$person</span><span class="operator">-&gt;</span><span class="operator">{</span><span class="string">NAME</span><span class="operator">}</span> <span class="operator">=</span> <span class="string">"Nat"</span><span class="operator">;</span>        <span class="comment"># set field NAME to "Nat"</span>
</code></code></pre>

<p>If you&#39;re looking for something a bit more rigorous, try <a href="../../lib/pods/perltoot.html">perltoot</a>.</p>

<h2 id="How-do-I-create-a-module-">How do I create a module?</h2>

<p><a href="../../lib/pods/perlnewmod.html">perlnewmod</a> is a good place to start, ignore the bits about uploading to CPAN if you don&#39;t want to make your module publicly available.</p>

<p><a>ExtUtils::ModuleMaker</a> and <a>Module::Starter</a> are also good places to start. Many CPAN authors now use <a>Dist::Zilla</a> to automate as much as possible.</p>

<p>Detailed documentation about modules can be found at: <a href="../../lib/pods/perlmod.html">perlmod</a>, <a href="../../lib/pods/perlmodlib.html">perlmodlib</a>, <a href="../../lib/pods/perlmodstyle.html">perlmodstyle</a>.</p>

<p>If you need to include C code or C library interfaces use h2xs. h2xs will create the module distribution structure and the initial interface files. <a href="../../lib/pods/perlxs.html">perlxs</a> and <a href="../../lib/pods/perlxstut.html">perlxstut</a> explain the details.</p>

<h2 id="How-do-I-adopt-or-take-over-a-module-already-on-CPAN-">How do I adopt or take over a module already on CPAN?</h2>

<p>Ask the current maintainer to make you a co-maintainer or transfer the module to you.</p>

<p>If you can not reach the author for some reason contact the PAUSE admins at modules@perl.org who may be able to help, but each case it treated seperatly.</p>

<ul>

<li><p>Get a login for the Perl Authors Upload Server (PAUSE) if you don&#39;t already have one: <a href="http://pause.perl.org">http://pause.perl.org</a></p>

</li>
<li><p>Write to modules@perl.org explaining what you did to contact the current maintainer. The PAUSE admins will also try to reach the maintainer.</p>

</li>
<li><p>Post a public message in a heavily trafficked site announcing your intention to take over the module.</p>

</li>
<li><p>Wait a bit. The PAUSE admins don&#39;t want to act too quickly in case the current maintainer is on holiday. If there&#39;s no response to private communication or the public post, a PAUSE admin can transfer it to you.</p>

</li>
</ul>

<h2 id="How-do-I-create-a-class-">How do I create a class?  </h2>

<p>(contributed by brian d foy)</p>

<p>In Perl, a class is just a package, and methods are just subroutines. Perl doesn&#39;t get more formal than that and lets you set up the package just the way that you like it (that is, it doesn&#39;t set up anything for you).</p>

<p>The Perl documentation has several tutorials that cover class creation, including <a href="../../lib/pods/perlboot.html">perlboot</a> (Barnyard Object Oriented Tutorial), <a href="../../lib/pods/perltoot.html">perltoot</a> (Tom&#39;s Object Oriented Tutorial), <a href="../../lib/pods/perlbot.html">perlbot</a> (Bag o&#39; Object Tricks), and <a href="../../lib/pods/perlobj.html">perlobj</a>.</p>

<h2 id="How-can-I-tell-if-a-variable-is-tainted-">How can I tell if a variable is tainted?</h2>

<p>You can use the tainted() function of the Scalar::Util module, available from CPAN (or included with Perl since release 5.8.0). See also <a href="../../lib/pods/perlsec.html#Laundering-and-Detecting-Tainted-Data">&quot;Laundering and Detecting Tainted Data&quot; in perlsec</a>.</p>

<h2 id="Whats-a-closure-">What&#39;s a closure?</h2>

<p>Closures are documented in <a href="../../lib/pods/perlref.html">perlref</a>.</p>

<p><i>Closure</i> is a computer science term with a precise but hard-to-explain meaning. Usually, closures are implemented in Perl as anonymous subroutines with lasting references to lexical variables outside their own scopes. These lexicals magically refer to the variables that were around when the subroutine was defined (deep binding).</p>

<p>Closures are most often used in programming languages where you can have the return value of a function be itself a function, as you can in Perl. Note that some languages provide anonymous functions but are not capable of providing proper closures: the Python language, for example. For more information on closures, check out any textbook on functional programming. Scheme is a language that not only supports but encourages closures.</p>

<p>Here&#39;s a classic non-closure function-generating function:</p>

<pre><code><code>    <span class="keyword">sub</span><span class="variable"> add_function_generator </span><span class="operator">{</span>
        <span class="keyword">return</span> <span class="keyword">sub</span><span class="variable"> </span><span class="operator">{</span> <span class="keyword">shift</span><span class="operator">()</span> <span class="operator">+</span> <span class="keyword">shift</span><span class="operator">()</span> <span class="operator">};</span>
    <span class="operator">}</span>
    
    <span class="keyword">my</span> <span class="variable">$add_sub</span> <span class="operator">=</span> <span class="variable">add_function_generator</span><span class="operator">();</span>
    <span class="keyword">my</span> <span class="variable">$sum</span> <span class="operator">=</span> <span class="variable">$add_sub</span><span class="operator">-&gt;(</span><span class="number">4</span><span class="operator">,</span><span class="number">5</span><span class="operator">);</span>                <span class="comment"># $sum is 9 now.</span>
</code></code></pre>

<p>The anonymous subroutine returned by add_function_generator() isn&#39;t technically a closure because it refers to no lexicals outside its own scope. Using a closure gives you a <i>function template</i> with some customization slots left out to be filled later.</p>

<p>Contrast this with the following make_adder() function, in which the returned anonymous function contains a reference to a lexical variable outside the scope of that function itself. Such a reference requires that Perl return a proper closure, thus locking in for all time the value that the lexical had when the function was created.</p>

<pre><code><code>    <span class="keyword">sub</span><span class="variable"> make_adder </span><span class="operator">{</span>
        <span class="keyword">my</span> <span class="variable">$addpiece</span> <span class="operator">=</span> <span class="keyword">shift</span><span class="operator">;</span>
        <span class="keyword">return</span> <span class="keyword">sub</span><span class="variable"> </span><span class="operator">{</span> <span class="keyword">shift</span><span class="operator">()</span> <span class="operator">+</span> <span class="variable">$addpiece</span> <span class="operator">};</span>
    <span class="operator">}</span>
    
    <span class="keyword">my</span> <span class="variable">$f1</span> <span class="operator">=</span> <span class="variable">make_adder</span><span class="operator">(</span><span class="number">20</span><span class="operator">);</span>
    <span class="keyword">my</span> <span class="variable">$f2</span> <span class="operator">=</span> <span class="variable">make_adder</span><span class="operator">(</span><span class="number">555</span><span class="operator">);</span>
</code></code></pre>

<p>Now <code><code>$f1-&gt;($n)</code></code> is always 20 plus whatever $n you pass in, whereas <code><code>$f2-&gt;($n)</code></code> is always 555 plus whatever $n you pass in. The $addpiece in the closure sticks around.</p>

<p>Closures are often used for less esoteric purposes. For example, when you want to pass in a bit of code into a function:</p>

<pre><code><code>    <span class="keyword">my</span> <span class="variable">$line</span><span class="operator">;</span>
    <span class="variable">timeout</span><span class="operator">(</span> <span class="number">30</span><span class="operator">,</span> <span class="keyword">sub</span><span class="variable"> </span><span class="operator">{</span> <span class="variable">$line</span> <span class="operator">=</span> <span class="operator">&lt;</span><span class="variable">STDIN</span><span class="operator">&gt;</span> <span class="operator">}</span> <span class="operator">);</span>
</code></code></pre>

<p>If the code to execute had been passed in as a string, <code><code>&#39;$line = &lt;STDIN&gt;&#39;</code></code>, there would have been no way for the hypothetical timeout() function to access the lexical variable $line back in its caller&#39;s scope.</p>

<p>Another use for a closure is to make a variable <i>private</i> to a named subroutine, e.g. a counter that gets initialized at creation time of the sub and can only be modified from within the sub. This is sometimes used with a BEGIN block in package files to make sure a variable doesn&#39;t get meddled with during the lifetime of the package:</p>

<pre><code><code>    <span class="keyword">BEGIN</span> <span class="operator">{</span>
        <span class="keyword">my</span> <span class="variable">$id</span> <span class="operator">=</span> <span class="number">0</span><span class="operator">;</span>
        <span class="keyword">sub</span><span class="variable"> next_id </span><span class="operator">{</span> <span class="operator">++</span><span class="variable">$id</span> <span class="operator">}</span>
    <span class="operator">}</span>
</code></code></pre>

<p>This is discussed in more detail in <a href="../../lib/pods/perlsub.html">perlsub</a>; see the entry on <i>Persistent Private Variables</i>.</p>

<h2 id="What-is-variable-suicide-and-how-can-I-prevent-it-">What is variable suicide and how can I prevent it?</h2>

<p>This problem was fixed in perl 5.004_05, so preventing it means upgrading your version of perl. ;)</p>

<p>Variable suicide is when you (temporarily or permanently) lose the value of a variable. It is caused by scoping through my() and local() interacting with either closures or aliased foreach() iterator variables and subroutine arguments. It used to be easy to inadvertently lose a variable&#39;s value this way, but now it&#39;s much harder. Take this code:</p>

<pre><code><code>    <span class="keyword">my</span> <span class="variable">$f</span> <span class="operator">=</span> <span class="string">'foo'</span><span class="operator">;</span>
    <span class="keyword">sub</span><span class="variable"> T </span><span class="operator">{</span>
        <span class="keyword">while</span> <span class="operator">(</span><span class="variable">$i</span><span class="operator">++</span> <span class="operator">&lt;</span> <span class="number">3</span><span class="operator">)</span> <span class="operator">{</span> <span class="keyword">my</span> <span class="variable">$f</span> <span class="operator">=</span> <span class="variable">$f</span><span class="operator">;</span> <span class="variable">$f</span> <span class="operator">.=</span> <span class="string">"bar"</span><span class="operator">;</span> <span class="keyword">print</span> <span class="variable">$f</span><span class="operator">,</span> <span class="string">"\n"</span> <span class="operator">}</span>
    <span class="operator">}</span>
    
    <span class="variable">T</span><span class="operator">;</span>
    <span class="keyword">print</span> <span class="string">"Finally </span><span class="variable">$f</span><span class="string">\n"</span><span class="operator">;</span>
</code></code></pre>

<p>If you are experiencing variable suicide, that <code><code>my $f</code></code> in the subroutine doesn&#39;t pick up a fresh copy of the <code><code>$f</code></code> whose value is <code><code>&#39;foo&#39;</code></code>. The output shows that inside the subroutine the value of <code><code>$f</code></code> leaks through when it shouldn&#39;t, as in this output:</p>

<pre><code><code>    foobar
    foobarbar
    foobarbarbar
    Finally foo</code></code></pre>

<p>The $f that has &quot;bar&quot; added to it three times should be a new <code><code>$f</code></code> <code><code>my $f</code></code> should create a new lexical variable each time through the loop. The expected output is:</p>

<pre><code><code>    foobar
    foobar
    foobar
    Finally foo</code></code></pre>

<h2 id="How-can-I-pass-return-a-Function-FileHandle-Array-Hash-Method-Regex-">How can I pass/return a {Function, FileHandle, Array, Hash, Method, Regex}?</h2>

<p>You need to pass references to these objects. See <a href="../../lib/pods/perlsub.html#Pass-by-Reference">&quot;Pass by Reference&quot; in perlsub</a> for this particular question, and <a href="../../lib/pods/perlref.html">perlref</a> for information on references.</p>

<dl>

<dt id="Passing-Variables-and-Functions">Passing Variables and Functions</dt>
<dd>

<p>Regular variables and functions are quite easy to pass: just pass in a reference to an existing or anonymous variable or function:</p>

<pre><code><code>    <span class="variable">func</span><span class="operator">(</span> <span class="operator">\</span><span class="variable">$some_scalar</span> <span class="operator">);</span>
    
    <span class="variable">func</span><span class="operator">(</span> <span class="operator">\</span><span class="variable">@some_array</span>  <span class="operator">);</span>
    <span class="variable">func</span><span class="operator">(</span> <span class="operator">[</span> <span class="number">1</span> <span class="operator">..</span> <span class="number">10</span> <span class="operator">]</span>   <span class="operator">);</span>
    
    <span class="variable">func</span><span class="operator">(</span> <span class="operator">\</span><span class="variable">%some_hash</span>   <span class="operator">);</span>
    <span class="variable">func</span><span class="operator">(</span> <span class="operator">{</span> <span class="string">this</span> <span class="operator">=&gt;</span> <span class="number">10</span><span class="operator">,</span> <span class="string">that</span> <span class="operator">=&gt;</span> <span class="number">20</span> <span class="operator">}</span>   <span class="operator">);</span>
    
    <span class="variable">func</span><span class="operator">(</span> <span class="operator">\&amp;</span><span class="variable">some_func</span>   <span class="operator">);</span>
    <span class="variable">func</span><span class="operator">(</span> <span class="keyword">sub</span><span class="variable"> </span><span class="operator">{</span> <span class="variable">$_</span><span class="operator">[</span><span class="number">0</span><span class="operator">]</span> <span class="operator">**</span> <span class="variable">$_</span><span class="operator">[</span><span class="number">1</span><span class="operator">]</span> <span class="operator">}</span>   <span class="operator">);</span>
</code></code></pre>

</dd>
<dt id="Passing-Filehandles">Passing Filehandles</dt>
<dd>

<p>As of Perl 5.6, you can represent filehandles with scalar variables which you treat as any other scalar.</p>

<pre><code><code>    <span class="keyword">open</span> <span class="keyword">my</span> <span class="variable">$fh</span><span class="operator">,</span> <span class="variable">$filename</span> <span class="keyword">or</span> <span class="keyword">die</span> <span class="string">"Cannot open </span><span class="variable">$filename</span><span class="string">! $!"</span><span class="operator">;</span>
    <span class="variable">func</span><span class="operator">(</span> <span class="variable">$fh</span> <span class="operator">);</span>
    
    <span class="keyword">sub</span><span class="variable"> func </span><span class="operator">{</span>
        <span class="keyword">my</span> <span class="variable">$passed_fh</span> <span class="operator">=</span> <span class="keyword">shift</span><span class="operator">;</span>
    
        <span class="keyword">my</span> <span class="variable">$line</span> <span class="operator">=</span> <span class="operator">&lt;</span><span class="variable">$passed_fh</span><span class="operator">&gt;;</span>
    <span class="operator">}</span>
</code></code></pre>

<p>Before Perl 5.6, you had to use the <code><code>*FH</code></code> or <code><code>\*FH</code></code> notations. These are &quot;typeglobs&quot;--see <a href="../../lib/pods/perldata.html#Typeglobs-and-Filehandles">&quot;Typeglobs and Filehandles&quot; in perldata</a> and especially <a href="../../lib/pods/perlsub.html#Pass-by-Reference">&quot;Pass by Reference&quot; in perlsub</a> for more information.</p>

</dd>
<dt id="Passing-Regexes">Passing Regexes</dt>
<dd>

<p>Here&#39;s an example of how to pass in a string and a regular expression for it to match against. You construct the pattern with the <code><code>qr//</code></code> operator:</p>

<pre><code><code>    <span class="keyword">sub</span><span class="variable"> compare</span><span class="operator">(</span>$$<span class="operator">)</span> <span class="operator">{</span>
        <span class="keyword">my</span> <span class="operator">(</span><span class="variable">$val1</span><span class="operator">,</span> <span class="variable">$regex</span><span class="operator">)</span> <span class="operator">=</span> <span class="variable">@_</span><span class="operator">;</span>
        <span class="keyword">my</span> <span class="variable">$retval</span> <span class="operator">=</span> <span class="variable">$val1</span> <span class="operator">=~</span> <span class="regex">/</span><span class="variable">$regex</span><span class="regex">/</span><span class="operator">;</span>
        <span class="keyword">return</span> <span class="variable">$retval</span><span class="operator">;</span>
    <span class="operator">}</span>
    <span class="variable">$match</span> <span class="operator">=</span> <span class="variable">compare</span><span class="operator">(</span><span class="string">"old McDonald"</span><span class="operator">,</span> <span class="string">qr/d.*D/i</span><span class="operator">);</span>
</code></code></pre>

</dd>
<dt id="Passing-Methods">Passing Methods</dt>
<dd>

<p>To pass an object method into a subroutine, you can do this:</p>

<pre><code><code>    <span class="variable">call_a_lot</span><span class="operator">(</span><span class="number">10</span><span class="operator">,</span> <span class="variable">$some_obj</span><span class="operator">,</span> <span class="string">"methname"</span><span class="operator">)</span>
    <span class="keyword">sub</span><span class="variable"> call_a_lot </span><span class="operator">{</span>
        <span class="keyword">my</span> <span class="operator">(</span><span class="variable">$count</span><span class="operator">,</span> <span class="variable">$widget</span><span class="operator">,</span> <span class="variable">$trick</span><span class="operator">)</span> <span class="operator">=</span> <span class="variable">@_</span><span class="operator">;</span>
        <span class="keyword">for</span> <span class="operator">(</span><span class="keyword">my</span> <span class="variable">$i</span> <span class="operator">=</span> <span class="number">0</span><span class="operator">;</span> <span class="variable">$i</span> <span class="operator">&lt;</span> <span class="variable">$count</span><span class="operator">;</span> <span class="variable">$i</span><span class="operator">++)</span> <span class="operator">{</span>
            <span class="variable">$widget</span><span class="operator">-&gt;</span><span class="variable">$trick</span><span class="operator">();</span>
        <span class="operator">}</span>
    <span class="operator">}</span>
</code></code></pre>

<p>Or, you can use a closure to bundle up the object, its method call, and arguments:</p>

<pre><code><code>    <span class="keyword">my</span> <span class="variable">$whatnot</span> <span class="operator">=</span> <span class="keyword">sub</span><span class="variable"> </span><span class="operator">{</span> <span class="variable">$some_obj</span><span class="operator">-&gt;</span><span class="variable">obfuscate</span><span class="operator">(</span><span class="variable">@args</span><span class="operator">)</span> <span class="operator">};</span>
    <span class="variable">func</span><span class="operator">(</span><span class="variable">$whatnot</span><span class="operator">);</span>
    <span class="keyword">sub</span><span class="variable"> func </span><span class="operator">{</span>
        <span class="keyword">my</span> <span class="variable">$code</span> <span class="operator">=</span> <span class="keyword">shift</span><span class="operator">;</span>
        <span class="operator">&amp;</span><span class="variable">$code</span><span class="operator">();</span>
    <span class="operator">}</span>
</code></code></pre>

<p>You could also investigate the can() method in the UNIVERSAL class (part of the standard perl distribution).</p>

</dd>
</dl>

<h2 id="How-do-I-create-a-static-variable-">How do I create a static variable?</h2>

<p>(contributed by brian d foy)</p>

<p>In Perl 5.10, declare the variable with <code><code>state</code></code>. The <code><code>state</code></code> declaration creates the lexical variable that persists between calls to the subroutine:</p>

<pre><code><code>    <span class="keyword">sub</span><span class="variable"> counter </span><span class="operator">{</span> <span class="keyword">state</span> <span class="variable">$count</span> <span class="operator">=</span> <span class="number">1</span><span class="operator">;</span> <span class="variable">$count</span><span class="operator">++</span> <span class="operator">}</span>
</code></code></pre>

<p>You can fake a static variable by using a lexical variable which goes out of scope. In this example, you define the subroutine <code><code>counter</code></code>, and it uses the lexical variable <code><code>$count</code></code>. Since you wrap this in a BEGIN block, <code><code>$count</code></code> is defined at compile-time, but also goes out of scope at the end of the BEGIN block. The BEGIN block also ensures that the subroutine and the value it uses is defined at compile-time so the subroutine is ready to use just like any other subroutine, and you can put this code in the same place as other subroutines in the program text (i.e. at the end of the code, typically). The subroutine <code><code>counter</code></code> still has a reference to the data, and is the only way you can access the value (and each time you do, you increment the value). The data in chunk of memory defined by <code><code>$count</code></code> is private to <code><code>counter</code></code>.</p>

<pre><code><code>    <span class="keyword">BEGIN</span> <span class="operator">{</span>
        <span class="keyword">my</span> <span class="variable">$count</span> <span class="operator">=</span> <span class="number">1</span><span class="operator">;</span>
        <span class="keyword">sub</span><span class="variable"> counter </span><span class="operator">{</span> <span class="variable">$count</span><span class="operator">++</span> <span class="operator">}</span>
    <span class="operator">}</span>
    
    <span class="keyword">my</span> <span class="variable">$start</span> <span class="operator">=</span> <span class="variable">counter</span><span class="operator">();</span>
    
    <span class="operator">....</span> <span class="comment"># code that calls counter();</span>
    
    <span class="keyword">my</span> <span class="variable">$end</span> <span class="operator">=</span> <span class="variable">counter</span><span class="operator">();</span>
</code></code></pre>

<p>In the previous example, you created a function-private variable because only one function remembered its reference. You could define multiple functions while the variable is in scope, and each function can share the &quot;private&quot; variable. It&#39;s not really &quot;static&quot; because you can access it outside the function while the lexical variable is in scope, and even create references to it. In this example, <code><code>increment_count</code></code> and <code><code>return_count</code></code> share the variable. One function adds to the value and the other simply returns the value. They can both access <code><code>$count</code></code>, and since it has gone out of scope, there is no other way to access it.</p>

<pre><code><code>    <span class="keyword">BEGIN</span> <span class="operator">{</span>
        <span class="keyword">my</span> <span class="variable">$count</span> <span class="operator">=</span> <span class="number">1</span><span class="operator">;</span>
        <span class="keyword">sub</span><span class="variable"> increment_count </span><span class="operator">{</span> <span class="variable">$count</span><span class="operator">++</span> <span class="operator">}</span>
        <span class="keyword">sub</span><span class="variable"> return_count    </span><span class="operator">{</span> <span class="variable">$count</span> <span class="operator">}</span>
    <span class="operator">}</span>
</code></code></pre>

<p>To declare a file-private variable, you still use a lexical variable. A file is also a scope, so a lexical variable defined in the file cannot be seen from any other file.</p>

<p>See <a href="../../lib/pods/perlsub.html#Persistent-Private-Variables">&quot;Persistent Private Variables&quot; in perlsub</a> for more information. The discussion of closures in <a href="../../lib/pods/perlref.html">perlref</a> may help you even though we did not use anonymous subroutines in this answer. See <a href="../../lib/pods/perlsub.html#Persistent-Private-Variables">&quot;Persistent Private Variables&quot; in perlsub</a> for details.</p>

<h2 id="Whats-the-difference-between-dynamic-and-lexical-static-scoping-Between-local-and-my-">What&#39;s the difference between dynamic and lexical (static) scoping? Between local() and my()?</h2>

<p><code><code>local($x)</code></code> saves away the old value of the global variable <code><code>$x</code></code> and assigns a new value for the duration of the subroutine <i>which is visible in other functions called from that subroutine</i>. This is done at run-time, so is called dynamic scoping. local() always affects global variables, also called package variables or dynamic variables.</p>

<p><code><code>my($x)</code></code> creates a new variable that is only visible in the current subroutine. This is done at compile-time, so it is called lexical or static scoping. my() always affects private variables, also called lexical variables or (improperly) static(ly scoped) variables.</p>

<p>For instance:</p>

<pre><code><code>    <span class="keyword">sub</span><span class="variable"> visible </span><span class="operator">{</span>
        <span class="keyword">print</span> <span class="string">"var has value </span><span class="variable">$var</span><span class="string">\n"</span><span class="operator">;</span>
    <span class="operator">}</span>
    
    <span class="keyword">sub</span><span class="variable"> dynamic </span><span class="operator">{</span>
        <span class="keyword">local</span> <span class="variable">$var</span> <span class="operator">=</span> <span class="string">'local'</span><span class="operator">;</span>    <span class="comment"># new temporary value for the still-global</span>
        <span class="variable">visible</span><span class="operator">();</span>              <span class="comment">#   variable called $var</span>
    <span class="operator">}</span>
    
    <span class="keyword">sub</span><span class="variable"> lexical </span><span class="operator">{</span>
        <span class="keyword">my</span> <span class="variable">$var</span> <span class="operator">=</span> <span class="string">'private'</span><span class="operator">;</span>    <span class="comment"># new private variable, $var</span>
        <span class="variable">visible</span><span class="operator">();</span>              <span class="comment"># (invisible outside of sub scope)</span>
    <span class="operator">}</span>
    
    <span class="variable">$var</span> <span class="operator">=</span> <span class="string">'global'</span><span class="operator">;</span>
    
    <span class="variable">visible</span><span class="operator">();</span>              <span class="comment"># prints global</span>
    <span class="variable">dynamic</span><span class="operator">();</span>              <span class="comment"># prints local</span>
    <span class="variable">lexical</span><span class="operator">();</span>              <span class="comment"># prints global</span>
</code></code></pre>

<p>Notice how at no point does the value &quot;private&quot; get printed. That&#39;s because $var only has that value within the block of the lexical() function, and it is hidden from the called subroutine.</p>

<p>In summary, local() doesn&#39;t make what you think of as private, local variables. It gives a global variable a temporary value. my() is what you&#39;re looking for if you want private variables.</p>

<p>See <a href="../../lib/pods/perlsub.html#Private-Variables-via-my-">&quot;Private Variables via my()&quot; in perlsub</a> and <a href="../../lib/pods/perlsub.html#Temporary-Values-via-local-">&quot;Temporary Values via local()&quot; in perlsub</a> for excruciating details.</p>

<h2 id="How-can-I-access-a-dynamic-variable-while-a-similarly-named-lexical-is-in-scope-">How can I access a dynamic variable while a similarly named lexical is in scope?</h2>

<p>If you know your package, you can just mention it explicitly, as in $Some_Pack::var. Note that the notation $::var is <b>not</b> the dynamic $var in the current package, but rather the one in the &quot;main&quot; package, as though you had written $main::var.</p>

<pre><code><code>    <span class="keyword">use</span> <span class="variable">vars</span> <span class="string">'$var'</span><span class="operator">;</span>
    <span class="keyword">local</span> <span class="variable">$var</span> <span class="operator">=</span> <span class="string">"global"</span><span class="operator">;</span>
    <span class="keyword">my</span>    <span class="variable">$var</span> <span class="operator">=</span> <span class="string">"lexical"</span><span class="operator">;</span>
    
    <span class="keyword">print</span> <span class="string">"lexical is </span><span class="variable">$var</span><span class="string">\n"</span><span class="operator">;</span>
    <span class="keyword">print</span> <span class="string">"global  is </span><span class="variable">$main</span><span class="string">::var\n"</span><span class="operator">;</span>
</code></code></pre>

<p>Alternatively you can use the compiler directive our() to bring a dynamic variable into the current lexical scope.</p>

<pre><code><code>    <span class="keyword">require</span> <span class="number">5.006</span><span class="operator">;</span> <span class="comment"># our() did not exist before 5.6</span>
    <span class="keyword">use</span> <span class="variable">vars</span> <span class="string">'$var'</span><span class="operator">;</span>
    
    <span class="keyword">local</span> <span class="variable">$var</span> <span class="operator">=</span> <span class="string">"global"</span><span class="operator">;</span>
    <span class="keyword">my</span> <span class="variable">$var</span>    <span class="operator">=</span> <span class="string">"lexical"</span><span class="operator">;</span>
    
    <span class="keyword">print</span> <span class="string">"lexical is </span><span class="variable">$var</span><span class="string">\n"</span><span class="operator">;</span>
    
    <span class="operator">{</span>
        <span class="keyword">our</span> <span class="variable">$var</span><span class="operator">;</span>
        <span class="keyword">print</span> <span class="string">"global  is </span><span class="variable">$var</span><span class="string">\n"</span><span class="operator">;</span>
    <span class="operator">}</span>
</code></code></pre>

<h2 id="Whats-the-difference-between-deep-and-shallow-binding-">What&#39;s the difference between deep and shallow binding?</h2>

<p>In deep binding, lexical variables mentioned in anonymous subroutines are the same ones that were in scope when the subroutine was created. In shallow binding, they are whichever variables with the same names happen to be in scope when the subroutine is called. Perl always uses deep binding of lexical variables (i.e., those created with my()). However, dynamic variables (aka global, local, or package variables) are effectively shallowly bound. Consider this just one more reason not to use them. See the answer to <a href="#What-s-a-closure-">&quot;What&#39;s a closure?&quot;</a>.</p>

<h2 id="Why-doesnt-my-foo-fh-work-right-">Why doesn&#39;t &quot;my($foo) = &lt;$fh&gt;;&quot; work right?</h2>

<p><code><code>my()</code></code> and <code><code>local()</code></code> give list context to the right hand side of <code><code>=</code></code>. The &lt;$fh&gt; read operation, like so many of Perl&#39;s functions and operators, can tell which context it was called in and behaves appropriately. In general, the scalar() function can help. This function does nothing to the data itself (contrary to popular myth) but rather tells its argument to behave in whatever its scalar fashion is. If that function doesn&#39;t have a defined scalar behavior, this of course doesn&#39;t help you (such as with sort()).</p>

<p>To enforce scalar context in this particular case, however, you need merely omit the parentheses:</p>

<pre><code><code>    <span class="keyword">local</span><span class="operator">(</span><span class="variable">$foo</span><span class="operator">)</span> <span class="operator">=</span> <span class="operator">&lt;</span><span class="variable">$fh</span><span class="operator">&gt;;</span>        <span class="comment"># WRONG</span>
    <span class="keyword">local</span><span class="operator">(</span><span class="variable">$foo</span><span class="operator">)</span> <span class="operator">=</span> <span class="keyword">scalar</span><span class="operator">(&lt;</span><span class="variable">$fh</span><span class="operator">&gt;);</span>   <span class="comment"># ok</span>
    <span class="keyword">local</span> <span class="variable">$foo</span>  <span class="operator">=</span> <span class="operator">&lt;</span><span class="variable">$fh</span><span class="operator">&gt;;</span>        <span class="comment"># right</span>
</code></code></pre>

<p>You should probably be using lexical variables anyway, although the issue is the same here:</p>

<pre><code><code>    <span class="keyword">my</span><span class="operator">(</span><span class="variable">$foo</span><span class="operator">)</span> <span class="operator">=</span> <span class="operator">&lt;</span><span class="variable">$fh</span><span class="operator">&gt;;</span>    <span class="comment"># WRONG</span>
    <span class="keyword">my</span> <span class="variable">$foo</span>  <span class="operator">=</span> <span class="operator">&lt;</span><span class="variable">$fh</span><span class="operator">&gt;;</span>    <span class="comment"># right</span>
</code></code></pre>

<h2 id="How-do-I-redefine-a-builtin-function-operator-or-method-">How do I redefine a builtin function, operator, or method?</h2>

<p>Why do you want to do that? :-)</p>

<p>If you want to override a predefined function, such as open(), then you&#39;ll have to import the new definition from a different module. See <a href="../../lib/pods/perlsub.html#Overriding-Built-in-Functions">&quot;Overriding Built-in Functions&quot; in perlsub</a>.</p>

<p>If you want to overload a Perl operator, such as <code><code>+</code></code> or <code><code>**</code></code>, then you&#39;ll want to use the <code><code>use overload</code></code> pragma, documented in <a href="../../lib/overload.html">overload</a>.</p>

<p>If you&#39;re talking about obscuring method calls in parent classes, see <a href="../../lib/pods/perltoot.html#Overridden-Methods">&quot;Overridden Methods&quot; in perltoot</a>.</p>

<h2 id="Whats-the-difference-between-calling-a-function-as-foo-and-foo-">What&#39;s the difference between calling a function as &amp;foo and foo()?</h2>

<p>(contributed by brian d foy)</p>

<p>Calling a subroutine as <code><code>&amp;foo</code></code> with no trailing parentheses ignores the prototype of <code><code>foo</code></code> and passes it the current value of the argument list, <code><code>@_</code></code>. Here&#39;s an example; the <code><code>bar</code></code> subroutine calls <code><code>&amp;foo</code></code>, which prints its arguments list:</p>

<pre><code><code>    <span class="keyword">sub</span><span class="variable"> bar </span><span class="operator">{</span> <span class="operator">&amp;</span><span class="variable">foo</span> <span class="operator">}</span>
    
    <span class="keyword">sub</span><span class="variable"> foo </span><span class="operator">{</span> <span class="keyword">print</span> <span class="string">"Args in foo are: </span><span class="variable">@_</span><span class="string">\n"</span> <span class="operator">}</span>
    
    <span class="variable">bar</span><span class="operator">(</span> <span class="string">qw( a b c )</span> <span class="operator">);</span>
</code></code></pre>

<p>When you call <code><code>bar</code></code> with arguments, you see that <code><code>foo</code></code> got the same <code><code>@_</code></code>:</p>

<pre><code><code>    Args in foo are: a b c</code></code></pre>

<p>Calling the subroutine with trailing parentheses, with or without arguments, does not use the current <code><code>@_</code></code> and respects the subroutine prototype. Changing the example to put parentheses after the call to <code><code>foo</code></code> changes the program:</p>

<pre><code><code>    <span class="keyword">sub</span><span class="variable"> bar </span><span class="operator">{</span> <span class="operator">&amp;</span><span class="variable">foo</span><span class="operator">()</span> <span class="operator">}</span>
    
    <span class="keyword">sub</span><span class="variable"> foo </span><span class="operator">{</span> <span class="keyword">print</span> <span class="string">"Args in foo are: </span><span class="variable">@_</span><span class="string">\n"</span> <span class="operator">}</span>
    
    <span class="variable">bar</span><span class="operator">(</span> <span class="string">qw( a b c )</span> <span class="operator">);</span>
</code></code></pre>

<p>Now the output shows that <code><code>foo</code></code> doesn&#39;t get the <code><code>@_</code></code> from its caller.</p>

<pre><code><code>    Args in foo are:</code></code></pre>

<p>The main use of the <code><code>@_</code></code> pass-through feature is to write subroutines whose main job it is to call other subroutines for you. For further details, see <a href="../../lib/pods/perlsub.html">perlsub</a>.</p>

<h2 id="How-do-I-create-a-switch-or-case-statement-">How do I create a switch or case statement?</h2>

<p>In Perl 5.10, use the <code><code>given-when</code></code> construct described in <a href="../../lib/pods/perlsyn.html">perlsyn</a>:</p>

<pre><code><code>    <span class="keyword">use</span> <span class="number">5.010</span><span class="operator">;</span>
    
    <span class="keyword">given</span> <span class="operator">(</span> <span class="variable">$string</span> <span class="operator">)</span> <span class="operator">{</span>
        <span class="keyword">when</span><span class="operator">(</span> <span class="string">'Fred'</span> <span class="operator">)</span>        <span class="operator">{</span> <span class="keyword">say</span> <span class="string">"I found Fred!"</span> <span class="operator">}</span>
        <span class="keyword">when</span><span class="operator">(</span> <span class="string">'Barney'</span> <span class="operator">)</span>      <span class="operator">{</span> <span class="keyword">say</span> <span class="string">"I found Barney!"</span> <span class="operator">}</span>
        <span class="keyword">when</span><span class="operator">(</span> <span class="regex">/Bamm-?Bamm/</span> <span class="operator">)</span>  <span class="operator">{</span> <span class="keyword">say</span> <span class="string">"I found Bamm-Bamm!"</span> <span class="operator">}</span>
        <span class="keyword">default</span>               <span class="operator">{</span> <span class="keyword">say</span> <span class="string">"I don't recognize the name!"</span> <span class="operator">}</span>
    <span class="operator">};</span>
</code></code></pre>

<p>If one wants to use pure Perl and to be compatible with Perl versions prior to 5.10, the general answer is to use <code><code>if-elsif-else</code></code>:</p>

<pre><code><code>    <span class="keyword">for</span> <span class="operator">(</span><span class="variable">$variable_to_test</span><span class="operator">)</span> <span class="operator">{</span>
        <span class="keyword">if</span>    <span class="operator">(</span><span class="regex">/pat1/</span><span class="operator">)</span>  <span class="operator">{</span> <span class="operator">}</span>     <span class="comment"># do something</span>
        <span class="keyword">elsif</span> <span class="operator">(</span><span class="regex">/pat2/</span><span class="operator">)</span>  <span class="operator">{</span> <span class="operator">}</span>     <span class="comment"># do something else</span>
        <span class="keyword">elsif</span> <span class="operator">(</span><span class="regex">/pat3/</span><span class="operator">)</span>  <span class="operator">{</span> <span class="operator">}</span>     <span class="comment"># do something else</span>
        <span class="keyword">else</span>            <span class="operator">{</span> <span class="operator">}</span>     <span class="comment"># default</span>
    <span class="operator">}</span>
</code></code></pre>

<p>Here&#39;s a simple example of a switch based on pattern matching, lined up in a way to make it look more like a switch statement. We&#39;ll do a multiway conditional based on the type of reference stored in $whatchamacallit:</p>

<pre><code><code>    <span class="variable">SWITCH</span><span class="operator">:</span> <span class="keyword">for</span> <span class="operator">(</span><span class="keyword">ref</span> <span class="variable">$whatchamacallit</span><span class="operator">)</span> <span class="operator">{</span>
    
        <span class="regex">/^$/</span>           <span class="operator">&amp;&amp;</span> <span class="keyword">die</span> <span class="string">"not a reference"</span><span class="operator">;</span>
    
        <span class="regex">/SCALAR/</span>       <span class="operator">&amp;&amp;</span> <span class="keyword">do</span> <span class="operator">{</span>
                        <span class="variable">print_scalar</span><span class="operator">(</span><span class="variable">$$ref</span><span class="operator">);</span>
                        <span class="keyword">last</span> <span class="variable">SWITCH</span><span class="operator">;</span>
                      <span class="operator">};</span>
    
        <span class="regex">/ARRAY/</span>        <span class="operator">&amp;&amp;</span> <span class="keyword">do</span> <span class="operator">{</span>
                        <span class="variable">print_array</span><span class="operator">(</span><span class="variable">@$ref</span><span class="operator">);</span>
                        <span class="keyword">last</span> <span class="variable">SWITCH</span><span class="operator">;</span>
                      <span class="operator">};</span>
    
        <span class="regex">/HASH/</span>        <span class="operator">&amp;&amp;</span> <span class="keyword">do</span> <span class="operator">{</span>
                        <span class="variable">print_hash</span><span class="operator">(</span><span class="variable">%$ref</span><span class="operator">);</span>
                        <span class="keyword">last</span> <span class="variable">SWITCH</span><span class="operator">;</span>
                      <span class="operator">};</span>
    
        <span class="regex">/CODE/</span>        <span class="operator">&amp;&amp;</span> <span class="keyword">do</span> <span class="operator">{</span>
                        <span class="keyword">warn</span> <span class="string">"can't print function ref"</span><span class="operator">;</span>
                        <span class="keyword">last</span> <span class="variable">SWITCH</span><span class="operator">;</span>
                      <span class="operator">};</span>
    
        <span class="comment"># DEFAULT</span>
    
        <span class="keyword">warn</span> <span class="string">"User defined type skipped"</span><span class="operator">;</span>
    
    <span class="operator">}</span>
</code></code></pre>

<p>See <a href="../../lib/pods/perlsyn.html">perlsyn</a> for other examples in this style.</p>

<p>Sometimes you should change the positions of the constant and the variable. For example, let&#39;s say you wanted to test which of many answers you were given, but in a case-insensitive way that also allows abbreviations. You can use the following technique if the strings all start with different characters or if you want to arrange the matches so that one takes precedence over another, as <code><code>&quot;SEND&quot;</code></code> has precedence over <code><code>&quot;STOP&quot;</code></code> here:</p>

<pre><code><code>    <span class="keyword">chomp</span><span class="operator">(</span><span class="variable">$answer</span> <span class="operator">=</span> <span class="operator">&lt;&gt;);</span>
    <span class="keyword">if</span>    <span class="operator">(</span><span class="string">"SEND"</span>  <span class="operator">=~</span> <span class="regex">/^\Q</span><span class="variable">$answer</span><span class="regex">/i</span><span class="operator">)</span> <span class="operator">{</span> <span class="keyword">print</span> <span class="string">"Action is send\n"</span>  <span class="operator">}</span>
    <span class="keyword">elsif</span> <span class="operator">(</span><span class="string">"STOP"</span>  <span class="operator">=~</span> <span class="regex">/^\Q</span><span class="variable">$answer</span><span class="regex">/i</span><span class="operator">)</span> <span class="operator">{</span> <span class="keyword">print</span> <span class="string">"Action is stop\n"</span>  <span class="operator">}</span>
    <span class="keyword">elsif</span> <span class="operator">(</span><span class="string">"ABORT"</span> <span class="operator">=~</span> <span class="regex">/^\Q</span><span class="variable">$answer</span><span class="regex">/i</span><span class="operator">)</span> <span class="operator">{</span> <span class="keyword">print</span> <span class="string">"Action is abort\n"</span> <span class="operator">}</span>
    <span class="keyword">elsif</span> <span class="operator">(</span><span class="string">"LIST"</span>  <span class="operator">=~</span> <span class="regex">/^\Q</span><span class="variable">$answer</span><span class="regex">/i</span><span class="operator">)</span> <span class="operator">{</span> <span class="keyword">print</span> <span class="string">"Action is list\n"</span>  <span class="operator">}</span>
    <span class="keyword">elsif</span> <span class="operator">(</span><span class="string">"EDIT"</span>  <span class="operator">=~</span> <span class="regex">/^\Q</span><span class="variable">$answer</span><span class="regex">/i</span><span class="operator">)</span> <span class="operator">{</span> <span class="keyword">print</span> <span class="string">"Action is edit\n"</span>  <span class="operator">}</span>
</code></code></pre>

<p>A totally different approach is to create a hash of function references.</p>

<pre><code><code>    <span class="keyword">my</span> <span class="variable">%commands</span> <span class="operator">=</span> <span class="operator">(</span>
        <span class="string">"happy"</span> <span class="operator">=&gt;</span> <span class="operator">\&amp;</span><span class="variable">joy</span><span class="operator">,</span>
        <span class="string">"sad"</span><span class="operator">,</span>  <span class="operator">=&gt;</span> <span class="operator">\&amp;</span><span class="variable">sullen</span><span class="operator">,</span>
        <span class="string">"done"</span>  <span class="operator">=&gt;</span> <span class="keyword">sub</span><span class="variable"> </span><span class="operator">{</span> <span class="keyword">die</span> <span class="string">"See ya!"</span> <span class="operator">},</span>
        <span class="string">"mad"</span>   <span class="operator">=&gt;</span> <span class="operator">\&amp;</span><span class="variable">angry</span><span class="operator">,</span>
    <span class="operator">);</span>
    
    <span class="keyword">print</span> <span class="string">"How are you? "</span><span class="operator">;</span>
    <span class="keyword">chomp</span><span class="operator">(</span><span class="variable">$string</span> <span class="operator">=</span> <span class="operator">&lt;</span><span class="variable">STDIN</span><span class="operator">&gt;);</span>
    <span class="keyword">if</span> <span class="operator">(</span><span class="variable">$commands</span><span class="operator">{</span><span class="variable">$string</span><span class="operator">}</span><span class="operator">)</span> <span class="operator">{</span>
        <span class="variable">$commands</span><span class="operator">{</span><span class="variable">$string</span><span class="operator">}</span><span class="operator">-&gt;();</span>
    <span class="operator">}</span> <span class="keyword">else</span> <span class="operator">{</span>
        <span class="keyword">print</span> <span class="string">"No such command: </span><span class="variable">$string</span><span class="string">\n"</span><span class="operator">;</span>
    <span class="operator">}</span>
</code></code></pre>

<p>Starting from Perl 5.8, a source filter module, <code><code>Switch</code></code>, can also be used to get switch and case. Its use is now discouraged, because it&#39;s not fully compatible with the native switch of Perl 5.10, and because, as it&#39;s implemented as a source filter, it doesn&#39;t always work as intended when complex syntax is involved.</p>

<h2 id="How-can-I-catch-accesses-to-undefined-variables-functions-or-methods-">How can I catch accesses to undefined variables, functions, or methods?</h2>

<p>The AUTOLOAD method, discussed in <a href="../../lib/pods/perlsub.html#Autoloading">&quot;Autoloading&quot; in perlsub</a> and <a href="../../lib/pods/perltoot.html#AUTOLOAD:-Proxy-Methods">&quot;AUTOLOAD: Proxy Methods&quot; in perltoot</a>, lets you capture calls to undefined functions and methods.</p>

<p>When it comes to undefined variables that would trigger a warning under <code><code>use warnings</code></code>, you can promote the warning to an error.</p>

<pre><code><code>    <span class="keyword">use</span> <span class="variable">warnings</span> <span class="string">FATAL</span> <span class="operator">=&gt;</span> <span class="string">qw(uninitialized)</span><span class="operator">;</span>
</code></code></pre>

<h2 id="Why-cant-a-method-included-in-this-same-file-be-found-">Why can&#39;t a method included in this same file be found?</h2>

<p>Some possible reasons: your inheritance is getting confused, you&#39;ve misspelled the method name, or the object is of the wrong type. Check out <a href="../../lib/pods/perltoot.html">perltoot</a> for details about any of the above cases. You may also use <code><code>print ref($object)</code></code> to find out the class <code><code>$object</code></code> was blessed into.</p>

<p>Another possible reason for problems is that you&#39;ve used the indirect object syntax (eg, <code><code>find Guru &quot;Samy&quot;</code></code>) on a class name before Perl has seen that such a package exists. It&#39;s wisest to make sure your packages are all defined before you start using them, which will be taken care of if you use the <code><code>use</code></code> statement instead of <code><code>require</code></code>. If not, make sure to use arrow notation (eg., <code><code>Guru-&gt;find(&quot;Samy&quot;)</code></code>) instead. Object notation is explained in <a href="../../lib/pods/perlobj.html">perlobj</a>.</p>

<p>Make sure to read about creating modules in <a href="../../lib/pods/perlmod.html">perlmod</a> and the perils of indirect objects in <a href="../../lib/pods/perlobj.html#Method-Invocation">&quot;Method Invocation&quot; in perlobj</a>.</p>

<h2 id="How-can-I-find-out-my-current-or-calling-package-">How can I find out my current or calling package?</h2>

<p>(contributed by brian d foy)</p>

<p>To find the package you are currently in, use the special literal <code><code>__PACKAGE__</code></code>, as documented in <a href="../../lib/pods/perldata.html">perldata</a>. You can only use the special literals as separate tokens, so you can&#39;t interpolate them into strings like you can with variables:</p>

<pre><code><code>    <span class="keyword">my</span> <span class="variable">$current_package</span> <span class="operator">=</span> <span class="keyword">__PACKAGE__</span><span class="operator">;</span>
    <span class="keyword">print</span> <span class="string">"I am in package </span><span class="variable">$current_package</span><span class="string">\n"</span><span class="operator">;</span>
</code></code></pre>

<p>If you want to find the package calling your code, perhaps to give better diagnostics as <a href="../../lib/Carp.html">Carp</a> does, use the <code><code>caller</code></code> built-in:</p>

<pre><code><code>    <span class="keyword">sub</span><span class="variable"> foo </span><span class="operator">{</span>
        <span class="keyword">my</span> <span class="variable">@args</span> <span class="operator">=</span> <span class="operator">...;</span>
        <span class="keyword">my</span><span class="operator">(</span> <span class="variable">$package</span><span class="operator">,</span> <span class="variable">$filename</span><span class="operator">,</span> <span class="variable">$line</span> <span class="operator">)</span> <span class="operator">=</span> <span class="keyword">caller</span><span class="operator">;</span>
    
        <span class="keyword">print</span> <span class="string">"I was called from package </span><span class="variable">$package</span><span class="string">\n"</span><span class="operator">;</span>
        <span class="operator">);</span>
</code></code></pre>

<p>By default, your program starts in package <code><code>main</code></code>, so you will always be in some package.</p>

<p>This is different from finding out the package an object is blessed into, which might not be the current package. For that, use <code><code>blessed</code></code> from <a href="../../lib/Scalar/Util.html">Scalar::Util</a>, part of the Standard Library since Perl 5.8:</p>

<pre><code><code>    <span class="keyword">use</span> <span class="variable">Scalar::Util</span> <span class="string">qw(blessed)</span><span class="operator">;</span>
    <span class="keyword">my</span> <span class="variable">$object_package</span> <span class="operator">=</span> <span class="variable">blessed</span><span class="operator">(</span> <span class="variable">$object</span> <span class="operator">);</span>
</code></code></pre>

<p>Most of the time, you shouldn&#39;t care what package an object is blessed into, however, as long as it claims to inherit from that class:</p>

<pre><code><code>    <span class="keyword">my</span> <span class="variable">$is_right_class</span> <span class="operator">=</span> <span class="keyword">eval</span> <span class="operator">{</span> <span class="variable">$object</span><span class="operator">-&gt;</span><span class="variable">isa</span><span class="operator">(</span> <span class="variable">$package</span> <span class="operator">)</span> <span class="operator">};</span> <span class="comment"># true or false</span>
</code></code></pre>

<p>And, with Perl 5.10 and later, you don&#39;t have to check for an inheritance to see if the object can handle a role. For that, you can use <code><code>DOES</code></code>, which comes from <code><code>UNIVERSAL</code></code>:</p>

<pre><code><code>    <span class="keyword">my</span> <span class="variable">$class_does_it</span> <span class="operator">=</span> <span class="keyword">eval</span> <span class="operator">{</span> <span class="variable">$object</span><span class="operator">-&gt;</span><span class="variable">DOES</span><span class="operator">(</span> <span class="variable">$role</span> <span class="operator">)</span> <span class="operator">};</span> <span class="comment"># true or false</span>
</code></code></pre>

<p>You can safely replace <code><code>isa</code></code> with <code><code>DOES</code></code> (although the converse is not true).</p>

<h2 id="How-can-I-comment-out-a-large-block-of-Perl-code-">How can I comment out a large block of Perl code?</h2>

<p>(contributed by brian d foy)</p>

<p>The quick-and-dirty way to comment out more than one line of Perl is to surround those lines with Pod directives. You have to put these directives at the beginning of the line and somewhere where Perl expects a new statement (so not in the middle of statements like the <code><code><span class="comment">#</span>
</code></code> comments). You end the comment with <code><code>=cut</code></code>, ending the Pod section:</p>

<pre><code><code>    <span class="comment">=pod
    
    my $object = NotGonnaHappen-&gt;new();
    
    ignored_sub();
    
    $wont_be_assigned = 37;
    
    =cut</span>
</code></code></pre>

<p>The quick-and-dirty method only works well when you don&#39;t plan to leave the commented code in the source. If a Pod parser comes along, you&#39;re multiline comment is going to show up in the Pod translation. A better way hides it from Pod parsers as well.</p>

<p>The <code><code>=begin</code></code> directive can mark a section for a particular purpose. If the Pod parser doesn&#39;t want to handle it, it just ignores it. Label the comments with <code><code>comment</code></code>. End the comment using <code><code>=end</code></code> with the same label. You still need the <code><code>=cut</code></code> to go back to Perl code from the Pod comment:</p>

<pre><code><code>    <span class="comment">=begin comment
    
    my $object = NotGonnaHappen-&gt;new();
    
    ignored_sub();
    
    $wont_be_assigned = 37;
    
    =end comment
    
    =cut</span>
</code></code></pre>

<p>For more information on Pod, check out <a href="../../lib/pods/perlpod.html">perlpod</a> and <a href="../../lib/pods/perlpodspec.html">perlpodspec</a>.</p>

<h2 id="How-do-I-clear-a-package-">How do I clear a package?</h2>

<p>Use this code, provided by Mark-Jason Dominus:</p>

<pre><code><code>    <span class="keyword">sub</span><span class="variable"> scrub_package </span><span class="operator">{</span>
        <span class="keyword">no</span> <span class="variable">strict</span> <span class="string">'refs'</span><span class="operator">;</span>
        <span class="keyword">my</span> <span class="variable">$pack</span> <span class="operator">=</span> <span class="keyword">shift</span><span class="operator">;</span>
        <span class="keyword">die</span> <span class="string">"Shouldn't delete main package"</span>
            <span class="keyword">if</span> <span class="variable">$pack</span> <span class="keyword">eq</span> <span class="string">""</span> <span class="operator">||</span> <span class="variable">$pack</span> <span class="keyword">eq</span> <span class="string">"main"</span><span class="operator">;</span>
        <span class="keyword">my</span> <span class="variable">$stash</span> <span class="operator">=</span> <span class="variable">*</span><span class="operator">{</span><span class="variable">$pack</span> <span class="operator">.</span> <span class="string">'::'</span><span class="operator">}{</span><span class="string">HASH</span><span class="operator">}</span><span class="operator">;</span>
        <span class="keyword">my</span> <span class="variable">$name</span><span class="operator">;</span>
        <span class="keyword">foreach</span> <span class="variable">$name</span> <span class="operator">(</span><span class="keyword">keys</span> <span class="variable">%$stash</span><span class="operator">)</span> <span class="operator">{</span>
            <span class="keyword">my</span> <span class="variable">$fullname</span> <span class="operator">=</span> <span class="variable">$pack</span> <span class="operator">.</span> <span class="string">'::'</span> <span class="operator">.</span> <span class="variable">$name</span><span class="operator">;</span>
            <span class="comment"># Get rid of everything with that name.</span>
            <span class="keyword">undef</span> <span class="variable">$$fullname</span><span class="operator">;</span>
            <span class="keyword">undef</span> <span class="variable">@$fullname</span><span class="operator">;</span>
            <span class="keyword">undef</span> <span class="variable">%$fullname</span><span class="operator">;</span>
            <span class="keyword">undef</span> <span class="operator">&amp;</span><span class="variable">$fullname</span><span class="operator">;</span>
            <span class="keyword">undef</span> <span class="operator">*</span><span class="variable">$fullname</span><span class="operator">;</span>
        <span class="operator">}</span>
    <span class="operator">}</span>
</code></code></pre>

<p>Or, if you&#39;re using a recent release of Perl, you can just use the Symbol::delete_package() function instead.</p>

<h2 id="How-can-I-use-a-variable-as-a-variable-name-">How can I use a variable as a variable name?</h2>

<p>Beginners often think they want to have a variable contain the name of a variable.</p>

<pre><code><code>    <span class="variable">$fred</span>    <span class="operator">=</span> <span class="number">23</span><span class="operator">;</span>
    <span class="variable">$varname</span> <span class="operator">=</span> <span class="string">"fred"</span><span class="operator">;</span>
    <span class="operator">++</span><span class="variable">$$varname</span><span class="operator">;</span>         <span class="comment"># $fred now 24</span>
</code></code></pre>

<p>This works <i>sometimes</i>, but it is a very bad idea for two reasons.</p>

<p>The first reason is that this technique <i>only works on global variables</i>. That means that if $fred is a lexical variable created with my() in the above example, the code wouldn&#39;t work at all: you&#39;d accidentally access the global and skip right over the private lexical altogether. Global variables are bad because they can easily collide accidentally and in general make for non-scalable and confusing code.</p>

<p>Symbolic references are forbidden under the <code><code>use strict</code></code> pragma. They are not true references and consequently are not reference-counted or garbage-collected.</p>

<p>The other reason why using a variable to hold the name of another variable is a bad idea is that the question often stems from a lack of understanding of Perl data structures, particularly hashes. By using symbolic references, you are just using the package&#39;s symbol-table hash (like <code><code>%main::</code></code>) instead of a user-defined hash. The solution is to use your own hash or a real reference instead.</p>

<pre><code><code>    <span class="variable">$USER_VARS</span><span class="operator">{</span><span class="string">"fred"</span><span class="operator">}</span> <span class="operator">=</span> <span class="number">23</span><span class="operator">;</span>
    <span class="keyword">my</span> <span class="variable">$varname</span> <span class="operator">=</span> <span class="string">"fred"</span><span class="operator">;</span>
    <span class="variable">$USER_VARS</span><span class="operator">{</span><span class="variable">$varname</span><span class="operator">}</span><span class="operator">++;</span>  <span class="comment"># not $$varname++</span>
</code></code></pre>

<p>There we&#39;re using the %USER_VARS hash instead of symbolic references. Sometimes this comes up in reading strings from the user with variable references and wanting to expand them to the values of your perl program&#39;s variables. This is also a bad idea because it conflates the program-addressable namespace and the user-addressable one. Instead of reading a string and expanding it to the actual contents of your program&#39;s own variables:</p>

<pre><code><code>    <span class="variable">$str</span> <span class="operator">=</span> <span class="string">'this has a $fred and $barney in it'</span><span class="operator">;</span>
    <span class="variable">$str</span> <span class="operator">=~</span> <span class="regex">s/(\$\w+)/$1/eeg</span><span class="operator">;</span>          <span class="comment"># need double eval</span>
</code></code></pre>

<p>it would be better to keep a hash around like %USER_VARS and have variable references actually refer to entries in that hash:</p>

<pre><code><code>    <span class="variable">$str</span> <span class="operator">=~</span> <span class="regex">s/\$(\w+)/$USER_VARS{$1}/g</span><span class="operator">;</span>   <span class="comment"># no /e here at all</span>
</code></code></pre>

<p>That&#39;s faster, cleaner, and safer than the previous approach. Of course, you don&#39;t need to use a dollar sign. You could use your own scheme to make it less confusing, like bracketed percent symbols, etc.</p>

<pre><code><code>    <span class="variable">$str</span> <span class="operator">=</span> <span class="string">'this has a %fred% and %barney% in it'</span><span class="operator">;</span>
    <span class="variable">$str</span> <span class="operator">=~</span> <span class="regex">s/%(\w+)%/$USER_VARS{$1}/g</span><span class="operator">;</span>   <span class="comment"># no /e here at all</span>
</code></code></pre>

<p>Another reason that folks sometimes think they want a variable to contain the name of a variable is that they don&#39;t know how to build proper data structures using hashes. For example, let&#39;s say they wanted two hashes in their program: %fred and %barney, and that they wanted to use another scalar variable to refer to those by name.</p>

<pre><code><code>    <span class="variable">$name</span> <span class="operator">=</span> <span class="string">"fred"</span><span class="operator">;</span>
    <span class="variable">$$name</span><span class="operator">{</span><span class="string">WIFE</span><span class="operator">}</span> <span class="operator">=</span> <span class="string">"wilma"</span><span class="operator">;</span>     <span class="comment"># set %fred</span>
    
    <span class="variable">$name</span> <span class="operator">=</span> <span class="string">"barney"</span><span class="operator">;</span>
    <span class="variable">$$name</span><span class="operator">{</span><span class="string">WIFE</span><span class="operator">}</span> <span class="operator">=</span> <span class="string">"betty"</span><span class="operator">;</span>    <span class="comment"># set %barney</span>
</code></code></pre>

<p>This is still a symbolic reference, and is still saddled with the problems enumerated above. It would be far better to write:</p>

<pre><code><code>    <span class="variable">$folks</span><span class="operator">{</span><span class="string">"fred"</span><span class="operator">}{</span><span class="string">WIFE</span><span class="operator">}</span>   <span class="operator">=</span> <span class="string">"wilma"</span><span class="operator">;</span>
    <span class="variable">$folks</span><span class="operator">{</span><span class="string">"barney"</span><span class="operator">}{</span><span class="string">WIFE</span><span class="operator">}</span> <span class="operator">=</span> <span class="string">"betty"</span><span class="operator">;</span>
</code></code></pre>

<p>And just use a multilevel hash to start with.</p>

<p>The only times that you absolutely <i>must</i> use symbolic references are when you really must refer to the symbol table. This may be because it&#39;s something that one can&#39;t take a real reference to, such as a format name. Doing so may also be important for method calls, since these always go through the symbol table for resolution.</p>

<p>In those cases, you would turn off <code><code>strict &#39;refs&#39;</code></code> temporarily so you can play around with the symbol table. For example:</p>

<pre><code><code>    <span class="variable">@colors</span> <span class="operator">=</span> <span class="string">qw(red blue green yellow orange purple violet)</span><span class="operator">;</span>
    <span class="keyword">for</span> <span class="keyword">my</span> <span class="variable">$name</span> <span class="operator">(</span><span class="variable">@colors</span><span class="operator">)</span> <span class="operator">{</span>
        <span class="keyword">no</span> <span class="variable">strict</span> <span class="string">'refs'</span><span class="operator">;</span>  <span class="comment"># renege for the block</span>
        <span class="operator">*</span><span class="variable">$name</span> <span class="operator">=</span> <span class="keyword">sub</span><span class="variable"> </span><span class="operator">{</span> <span class="string">"&lt;FONT COLOR='</span><span class="variable">$name</span><span class="string">'&gt;</span><span class="variable">@_</span><span class="string">&lt;/FONT&gt;"</span> <span class="operator">};</span>
    <span class="operator">}</span>
</code></code></pre>

<p>All those functions (red(), blue(), green(), etc.) appear to be separate, but the real code in the closure actually was compiled only once.</p>

<p>So, sometimes you might want to use symbolic references to manipulate the symbol table directly. This doesn&#39;t matter for formats, handles, and subroutines, because they are always global--you can&#39;t use my() on them. For scalars, arrays, and hashes, though--and usually for subroutines-- you probably only want to use hard references.</p>

<h2 id="What-does-bad-interpreter-mean-">What does &quot;bad interpreter&quot; mean?</h2>

<p>(contributed by brian d foy)</p>

<p>The &quot;bad interpreter&quot; message comes from the shell, not perl. The actual message may vary depending on your platform, shell, and locale settings.</p>

<p>If you see &quot;bad interpreter - no such file or directory&quot;, the first line in your perl script (the &quot;shebang&quot; line) does not contain the right path to perl (or any other program capable of running scripts). Sometimes this happens when you move the script from one machine to another and each machine has a different path to perl--/usr/bin/perl versus /usr/local/bin/perl for instance. It may also indicate that the source machine has CRLF line terminators and the destination machine has LF only: the shell tries to find /usr/bin/perl&lt;CR&gt;, but can&#39;t.</p>

<p>If you see &quot;bad interpreter: Permission denied&quot;, you need to make your script executable.</p>

<p>In either case, you should still be able to run the scripts with perl explicitly:</p>

<pre><code><code>    % perl script.pl</code></code></pre>

<p>If you get a message like &quot;perl: command not found&quot;, perl is not in your PATH, which might also mean that the location of perl is not where you expect it so you need to adjust your shebang line.</p>

<h1 id="AUTHOR-AND-COPYRIGHT">AUTHOR AND COPYRIGHT</h1>

<p>Copyright (c) 1997-2010 Tom Christiansen, Nathan Torkington, and other authors as noted. All rights reserved.</p>

<p>This documentation is free; you can redistribute it and/or modify it under the same terms as Perl itself.</p>

<p>Irrespective of its distribution, all code examples in this file are hereby placed into the public domain. You are permitted and encouraged to use this code in your own programs for fun or for profit as you see fit. A simple comment in the code giving credit would be courteous but is not required.</p>


</body>

</html>


